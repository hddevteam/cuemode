# 更新日志

CueMode 提词器扩展的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，
项目遵循 [语义化版本控制](https://semver.org/spec/v2.0.0.html)。

## [2.1.0] - 2025-07-13 - 聚焦模式与国际化重构

### 🌟 新增功能

- **聚焦模式**：新增聚焦阅读模式，通过模糊非焦点内容突出显示当前阅读区域
  - 可配置聚焦不透明度（0.1-0.8，默认0.3）
  - 可调节聚焦行数（1-10行，默认3行）
  - 提词器模式下按 `F` 键即时切换聚焦模式
  - 增加了 `toggleFocusMode` 命令
- **智能渐变模糊算法**：提供平滑的阅读体验，包含缓冲区域
- **聚焦指示器**：可视化显示当前活跃阅读区域

### 🌐 国际化系统重构

- **i18next 集成**：使用行业标准的 i18next 库替换自定义国际化系统
- **动态语言切换**：支持运行时语言切换，无需重启扩展
- **增强的翻译功能**：
  - 支持 `{{变量}}` 语法的插值
  - 复数形式支持
  - 上下文感知翻译
  - 缺失键处理和回退机制
- **自动语言检测**：从 VS Code 环境或系统区域设置自动检测语言
- **类型安全**：改进翻译键和参数的类型安全性

### 🔧 架构改进

- **文件结构重组**：
  - 移除 `src/i18n/` TypeScript 文件目录
  - 新增 `src/locales/` JSON 翻译文件目录
  - 新增集中式 `src/i18n.ts` 国际化管理器
- **配置架构更新**：扩展配置接口，新增聚焦模式相关属性
- **依赖管理**：添加 i18next 作为生产依赖

### 🚀 用户体验增强

- **实时配置更新**：聚焦模式设置实时生效，无需重启
- **增强的键盘快捷键**：
  - `F` 键：切换聚焦模式
  - `T` 键：循环主题切换
  - 改进的帮助系统，包含本地化快捷键说明
- **视觉反馈优化**：
  - 聚焦区域指示器，采用精美样式设计
  - 改进行换行以提高聚焦模式兼容性
  - 为不同模式和状态提供清晰的视觉反馈

### 🧪 质量保证

- **增强的测试套件**：
  - 新的 i18next 系统全面测试覆盖
  - 聚焦模式配置和行为测试
  - 更新的配置属性测试
  - 英文和中文翻译测试
- **类型安全改进**：增强 i18n 函数的类型定义，防止运行时错误

### 🛠️ 技术改进

- **构建系统优化**：自动复制 JSON 翻译文件
- **性能优化**：
  - 高效的翻译加载和缓存
  - 使用 requestAnimationFrame 优化聚焦模式模糊计算
  - 改进内存管理和资源清理
- **异步扩展激活**：正确初始化 i18n 的异步激活流程

### 🎯 可访问性改进

- **屏幕阅读器支持**：增强 ARIA 标签和语义标记
- **键盘导航**：改进仅键盘导航体验
- **视觉反馈**：为不同模式和状态提供清晰的视觉指示器

## [2.0.0] - 2025-07-12 - 专业提词器 2.0

### 🚀 主要功能

- **T键主题切换**：在提词器模式下按'T'键可立即切换主题
- **专业命令套件**：添加了 `changeTheme` 和 `removeLeadingSpaces` 命令
- **高级键盘快捷键**：
  - `Ctrl+Shift+T`（Mac上为 Cmd+Shift+T）- 通过菜单更改主题
  - `Ctrl+Shift+R`（Mac上为 Cmd+Shift+R）- 移除前导空格
  - 提词器模式下的 `T` 键 - 即时主题切换
- **内容预处理**：用于清理演示文稿缩进文本的新命令
- **交互式帮助系统**：增强的帮助面板，支持点击外部关闭功能

### 🎯 专业提词器焦点

- **TypeScript 迁移**：完整代码库重写，提高可维护性
- **全面测试**：71个测试用例确保可靠性
- **自动滚动控制**：专业空格键控制
- **实时速度调整**：+/-键进行实时节奏控制
- **方向切换**：R键用于反向滚动
- **极简UI**：无干扰的阅读体验
- **专业主题**：针对视频录制和演示进行优化

### 🌐 增强的用户体验

- **非侵入式通知**：自动消失的状态栏消息（2-3秒）
- **无缝UX**：移除模态对话框，提供快速状态反馈
- **国际化**：完整的英文和中文支持
- **增强的错误处理**：专业级日志记录和恢复

### 🛠️ 技术改进

- 从 `showInformationMessage` 迁移到 `setStatusBarMessage` 以获得更好的用户体验
- 向WebView通信添加了 `cycleTheme` 消息类型
- 增强的命令注册和清理
- 改进事件监听器的内存管理
- 严格的TypeScript类型和全面的错误处理

### 📈 代码质量

- 专业提词器功能重点
- 全面的测试框架（71个测试用例）
- 增强的专业使用键盘快捷键
- 增强的错误处理和日志记录
- 专业提词器主题优化

### 新增

- 专业提词器功能重点
- TypeScript迁移以提高代码可维护性
- 全面的测试框架（71个测试用例）
- 带空格键的自动滚动提词器控制
- 用+/-键进行实时速度调整
- 用R键进行方向切换以实现反向滚动
- 增强的专业使用键盘快捷键
- 无干扰阅读的极简UI
- 国际化支持（英文/中文）
- 增强的错误处理和日志记录
- 专业提词器主题优化

### 更改

- **重大变化**：重新定位为专业提词器工具
- 更新所有文档以专注于提词器用例
- 模块化架构以更好地组织代码
- 增强的开发工具和构建过程
- 改进营销文案，强调提词器功能
- 更新包描述和关键词以提高可发现性

### 修复

- 各种稳定性改进
- 跨平台兼容性问题
- 自动滚动性能优化

## [1.1.3] - 2025-07-12 - 专业提词器更新

### 新增

- ✨ **自动滚动提词器**：带空格键的专业滚动控制
- ✨ **实时速度控制**：在演示过程中用+/-键调整阅读节奏
- ✨ **方向切换**：用R键反向滚动以实现灵活阅读
- ✨ **增强的键盘快捷键**：完整的专业提词器控制集
- ✨ **极简UI**：隐藏控件以实现无干扰阅读体验
- 🌐 **多语言支持**：英文和中文界面
- 📺 **提词器优化**：改进的主题和布局，用于视频录制

### 更改

- **重新品牌为专业提词器**：所有文档已更新
- **增强的用户体验**：即时反馈和流畅控制
- **专业重点**：针对内容创作者和教育者进行优化

### 修复

- 错误修复和稳定性改进
- 流畅自动滚动的性能优化
- 跨不同主题的UI一致性

## [1.1.0] - 2024-XX-XX - 增强的演示功能

### 新增

- 实时设置更新 - 更改现在立即反映在提词器模式中
- 实时内容同步 - 文本修改无需重新进入模式即可更新
- 改进的起始位置 - 内容现在居中以获得更好的提词器体验

### 更改

- 通过即时反馈增强用户体验
- 更好的内容显示定位算法
- 改进的演示流程和可用性

### 修复

- 解决了设置未立即应用的问题
- 修复了内容定位不一致问题
- 提高了整体稳定性

## [1.0.0] - 2024-XX-XX

### 新增

- CueMode扩展的初始版本
- 基本的"提示模式"功能，用于增强可读性
- 多种颜色主题（经典、反转、午夜蓝、日落、森林、海洋、玫瑰）
- 字体大小、行高和布局的可自定义设置
- 上下文菜单集成，便于访问
- 可配置的滚动速度和起始位置
- 基于WebView的演示界面

### 功能

- 字体大小调整（默认：24pt）
- 行高控制（默认：1.5em）
- 内容宽度限制（默认：800px）
- 填充自定义（默认：10px）
- 滚动速度控制（默认：0.1）
- 起始位置配置（默认：50%）
- 七种美丽的颜色主题可供选择

---

## 版本历史摘要

| 版本    | 发布日期    | 主要功能                                                   |
|---------|------------|-----------------------------------------------------------|
| 2.1.0   | 2025-07-13 | **聚焦模式与国际化重构** - F键聚焦、i18next集成、智能模糊算法 |
| 2.0.0   | 2025-07-12 | **专业提词器 2.0** - T键切换、TypeScript迁移、71个测试      |
| 1.1.3   | 2025-07-12 | 错误修复、性能改进                                          |
| 1.1.0   | 2024       | 实时更新、实时同步、改进定位                                |
| 1.0.0   | 2024       | 初始版本、基本功能                                          |

---

## 升级指南

### 从 1.1.0 到 1.1.3

- 无重大变化
- 通过VS Code自动更新
- 保留所有现有设置

### 从 1.0.0 到 1.1.0

- 无重大变化
- 新的实时更新功能自动可用
- 设置迁移自动处理

---

*有关即将推出功能的更多信息，请参阅我们的[路线图](ROADMAP.zh-CN.md)。*